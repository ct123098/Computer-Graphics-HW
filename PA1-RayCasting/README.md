# PA1: Ray Casting

## 文件树结构

```
├── REPORT.pdf
└── code
    ├── deps
    ├── src
    ├── include
    ├── run_all.sh
    ├── CMakeLists.txt
    └── testcases
```

## 问题回答

- 你所实现的光线投射算法逻辑是怎样的？你在实现中遇到了哪些问题？

- 你在完成作业的时候和哪些同学进行了怎样的讨论？是否借鉴了网上/别的同学的代码？
    - 小孔相机参考了 [Scratchapixel](https://www.scratchapixel.com/lessons/3d-basic-rendering/3d-viewing-pinhole-camera/index.php) 中的内容；
    - 其余部分只参考了作业文档。

- 如何编译你的代码并输出上述 7 个测试用例的渲染结果？如果你没有使用框架代码，请放上你渲染的图片结果。
    - 直接运行 `run_all.sh` 即可

- 你的代码有哪些未解决的 bug？如果给你更多时间来完成作业，你将会怎样进行调试？
    - 目前没有发现bug。

- (可选) 你对本次编程作业有什么建议？文档或代码中有哪些需要我们改进的地方？



- 你所实现的画线、画圆和区域填充逻辑是怎样的？你在实现中遇到了哪些问题？ 
    - 画线：对于满足$x_0 \leq x_1, y_0 \leq y_1, (y_1 - y_0) \leq (x_1 - x_0)$ 的线段$(x_0, y_0)-(x_1, y_1)$ ，可以直接使用教材上介绍的Bresenham算法实现。而对于不满足条件的线段，我们可以通过坐标变换使端点在变换后的空间上满足条件。首先，将横坐标较小的点记为$(x_0, y_0)$。此时射线$(x_0, y_0)-(x_1, y_1)$与x-轴的夹角$\theta \in [-\pi/2, \pi/2]$。对于$\theta \in (\pi/4, \pi/2]$，将图片关于$x=y$对称（即长宽对调）后满足条件；对于$\theta \in [-\pi/4, 0)$，将图片关于$y = (h - 1) / 2$对称（即垂直翻转）后满足条件；对于$\theta \in [-\pi/2, \pi/4)$，先垂直翻转再长宽对调，则满足条件。需要注意的是，在变换后的空间计算完线段经过的点坐标后，需要进行**逆变换**在原图中着色。
    - 画圆：实现教材上中点画圆法，并使用8对称点法画出整个圆周。
    - 区域填充：实现了内点表示的四连通区域填充。为了避免栈溢出，我使用BFS算法。对于每个队列中取出的当前点，遍历周围四个像素，如果有颜色为原色的点，则将其设置为新颜色，并加入队列。
- 你在完成作业的时候和哪些同学进行了怎样的讨论？是否借鉴了网上/别的同学的代码？ 
    - 没有进行讨论和查阅，只参考了教材。
- 你的代码有哪些未解决的 bug？如果给你更多时间来完成作业，你将会怎样进行调试？ 
    - 目前没有发现bug。
- 你对本次作业有什么建议？文档或代码中有哪些需要我们改进的地方？
    - 感觉难度不大，没有涉及教材第二章节的后半部分内容。不过作为第一次作业，感觉任务量还是合适的。