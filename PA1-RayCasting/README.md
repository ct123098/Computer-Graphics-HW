# PA1: Ray Casting

## 文件树结构

```
├── REPORT.pdf
└── code
    ├── deps
    ├── src
    ├── include
    ├── run_all.sh
    ├── CMakeLists.txt
    └── testcases
```

## 问题回答

- 你所实现的光线投射算法逻辑是怎样的？你在实现中遇到了哪些问题？
    - 依次遍历需要绘制的每一个像素，根据相机参数生成射线
    - 对于给定射线，遍历所有物体计算交点，保留距离最近的交点对应的法向量和材质信息
        - 射线与物体组求交：遍历所有物体计算交点，保留最近的交点
        - 射线与球求交：按照习题课课件实现。
        - 射线与平面求交：表示平面使用上一点和法向量。交点计算公式按照习题课课件实现。
        - 射线与三角片求交：首先进行线面求交，然后判断交点是否在三角形内部。判断方法为计算交点与任两顶点形成的有向面积，若同号则在形内，否则在形外。
    - 得到交点的法向量和材质信息后，遍历所有光源，用Phong模型计算一个光源在该点处的的亮度，将结果叠加得到该点处的亮度，即该像素的颜色。
- 你在完成作业的时候和哪些同学进行了怎样的讨论？是否借鉴了网上/别的同学的代码？
    - 小孔相机参考了 [Scratchapixel](https://www.scratchapixel.com/lessons/3d-basic-rendering/3d-viewing-pinhole-camera/index.php) 中的内容；其余部分只参考了作业文档。
    - 感谢@Qianfan Zhang在完成代码后的交流中指出了我的一些代码细节问题。
- 如何编译你的代码并输出上述 7 个测试用例的渲染结果？如果你没有使用框架代码，请放上你渲染的图片结果。
    - 直接运行 `run_all.sh` 即可
- 你的代码有哪些未解决的 bug？如果给你更多时间来完成作业，你将会怎样进行调试？
    - 目前没有发现未解决的bug。
- (可选) 你对本次编程作业有什么建议？文档或代码中有哪些需要我们改进的地方？
    - 对于作业内容没有什么建议，感觉难度和任务量适中。
    - 在代码模板中，有几个类（如PerspectiveCamera）的构造函数的参数名与类的成员变量出现同名，这一设计容易导致开发者误用。
    - 样例6（1k兔子）的参考图片与我生成的图片在光照效果上有细微的差异。怀疑样例图片与下发的配置文件不匹配。

